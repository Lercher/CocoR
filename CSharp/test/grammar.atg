COMPILER CassiopaeDB

CHARACTERS
	uppercaseletter = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".
	digit    		= "0123456789".
	underscore		= "_".
	cr				= "\r".
	lf 				= "\n".
	stringCh  		= ANY - '"' - cr - lf.
	
TOKENS
	databasecode	= uppercaseletter {uppercaseletter | digit | underscore}.
	languagecode	= uppercaseletter uppercaseletter CONTEXT (':').
	twodigitnumber	= digit[digit].
	string 			= '"' { stringCh } '"'.
	orfi			= "orfi".
	language		= "languages".
	domain			= "domain".
	values			= "values".
	length			= "length".
	end				= "end".
	
COMMENTS FROM "//" TO lf

IGNORE cr + lf

PRODUCTIONS
	CassiopaeDB			= Languages								(. Domain domain = new Domain(); .)
						  {Domain}
						  .
				
	Languages			= language '(' languagecode ',' languagecode ',' languagecode ')'
						  .
				
	Domain				= domain 								
						  [orfi]   								(. domain.setOrfi(t.val.equals("orfi")? true : false); .)
						  Databasecode 							
						  length twodigitnumber					(. domain.setNamelength(t.val); .)
						  Translations
						  Domainvalues
						  end domain
						  .
						  
	Databasecode 		= databasecode 							(. domain.setName(t.val); .)
						  | string 	   							(. domain.setName(t.val); .)
						  .
	
	Translations		= languagecode ':' string
						  languagecode ':' string
						  languagecode ':' string
						  .
								  
	Domainvalues		= values
						  Domainvalue							(. Domainvalue value = new Domainvalue();??? .)
						  {Domainvalue}							
						  .
				
	Domainvalue			= databasecode '=' Domaintranslations	
						  .
									  
	Domaintranslations	= languagecode ':' string ',' string
						  languagecode ':' string ',' string
						  languagecode ':' string ',' string			
						  .    
	
END CassiopaeDB.